@model Piwonka.CC.ViewComponents.LanguageSwitcherViewModel
@using Piwonka.CC.Services
@inject ILanguageService LanguageService

<div class="dropdown @Model.CssClass">
    <button class="btn btn-outline-secondary dropdown-toggle btn-sm" type="button" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-globe"></i> @LanguageService.GetLanguageName(Model.CurrentLanguage)
    </button>
    <ul class="dropdown-menu" aria-labelledby="languageDropdown">
        @foreach (var language in Model.AvailableLanguages)
        {
            var languageCode = LanguageService.GetLanguageCode(language);

            <li>
                <a class="dropdown-item @(language == Model.CurrentLanguage ? "active" : "")"
                   href="?lang=@languageCode">
                    @if (language == Model.CurrentLanguage)
                    {
                        <i class="bi bi-check-circle-fill text-success me-2"></i>
                    }
                    else
                    {
                        <i class="bi bi-circle me-2"></i>
                    }
                    @LanguageService.GetLanguageName(language)
                </a>
            </li>
        }
    </ul>
</div>